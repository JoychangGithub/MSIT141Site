@{
    ViewData["Title"] = "Home Page";
}


@section Styles{
    <style>
         /*   h1 {
                background-color: grey;
            }*/
        thead, tbody, th,td {
            border: 1px solid black
        }
        </style>
}
<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Learn about <a href="https://docs.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
</div>
<button id="buttonClick">ok</button>
<hr>
<div>
    <table>
        <thead>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

@*@section Scripts{
    <script>
        console.log("Hello");
        $('.display-4').text("welocome MVC!");
    </script>
     }*@

@section Scripts{
    <script>
        //按下按鈕後字的背景顏色改變與顯示welocome MVC!

        //$('#buttonClick').click(function ()
        //{
        //    console.log("Hello");
        //    $('.display-4').text("welocome MVC!");

        //    $('.display-4').css("background-color", "grey");
        //})

        //老師示範:
        //找到要控制的對象 getElementById('id')、querySelector('css selectors')
        //const btn = document.querySelector('#buttonClick');
        //const myH = document.querySelector('.display-4');
        //使用者的甚麼行為發生 => Event 事件
        //按下按鈕 => click
        /*btn.addEventListener('click', () => {*/
            //要做甚麼事
            //console.log("Hello");
            //myH.textContent = "Welcome MVC!!";
            //$('.display-4').text("Welcome MVC!!");
            //var emps = [{ "name": "Tom", "workYears": 3, "salary": 35000 },
            //{ "name": "Jack", "workYears": 5, "salary": 40000 },
            //{ "name": "Mary", "workYears": 7, "salary": 45000 }];
            //[{},{},{}]
            //array[index 0,1,2]
            //const emp = emps[1] //{ "name": "Jack", "workYears": 5, "salary": 40000 }
            ////object.prop  emp.name => Jack
            //myH.textContent = emp.salary
            //讀取JSON格式的資料
            //for (let i = 0, max = emps.length; i < max; i++) {
            //    console.log(emps[i].name)
            //    console.log(emps[i].workYears)
            //    console.log(emps[i].salary)
            //}

            //todo 讀取emp中的所有資料
            //Javascript
            //var emp = {
            //    "employees": [
            //        { "name": "Tom", "workYears": 3, "salary": 35000 },
            //        { "name": "Jack", "workYears": 5, "salary": 40000 },
            //        { "name": "Mary", "workYears": 7, "salary": 45000 }
            //    ]
            //};

            //let e = emp.employees;
            //for (let i=0; i < e.length; i++)
            //{
            //    console.log(e[i].name)
            //    console.log(e[i].workYears)
            //    console.log(e[i].salary)
            //}

            //ES6
            //emp.employees.forEach(employee => {
            //    //解構賦值(Destructuring assignment) 
            //    const { name, workYears, salary } = employee
            //    console.log(name)
            //    console.log(workYears)
            //    console.log(salary)
            //})
       /* });*/

        //jQuery
        //$('#buttonClick').click(() => {
        //    var emp = {
        //        "employees": [
        //            { "name": "Tom", "workYears": 3, "salary": 35000 },
        //            { "name": "Jack", "workYears": 5, "salary": 40000 },
        //            { "name": "Mary", "workYears": 7, "salary": 45000 }
        //        ]
        //    };
        //    $.each(emp.employees, (idx, employee) => {
        //        //console.log(idx)
        //        const { name, workYears, salary } = employee
        //        console.log(name)
        //        console.log(workYears)
        //        console.log(salary)
        //    })
        //})

        //==================================================================================================
        //作業 2022/07/02:
        //按下按鈕後讀取JSON的資料顯示在表格中

        var emp = {
                "employees": [
                    { "name": "Tom", "workYears": 3, "salary": 35000 },
                    { "name": "Jack", "workYears": 5, "salary": 40000 },
                    { "name": "Mary", "workYears": 7, "salary": 45000 }
                ]
        };

        document.querySelector("#buttonClick").addEventListener("click", btnClick, false);

        //減少瀏覽器reflow，使用文件片斷         
        function btnClick() {
            //產生表格標題
            document.querySelector("thead").innerHTML ="<tr><th>name</th><th>workYears</th><th>salary</th></tr>"

            //產生表格內容
            let tbody = document.querySelector("tbody");

            let docFrag = document.createDocumentFragment();            
            for (let i = 0; i < emp.employees.length; i++)
            {
                let eleTr = document.createElement("tr");
                let eleTdforName = document.createElement("td");
                let txtTdforName = document.createTextNode(`${emp.employees[i].name}`);

                eleTdforName.appendChild(txtTdforName);
                eleTr.appendChild(eleTdforName);               

                let eleTdforworkYears = document.createElement("td");
                let txtTdforworkYears = document.createTextNode(`${emp.employees[i].workYears}`);

                eleTdforworkYears.appendChild(txtTdforworkYears);
                eleTr.appendChild(eleTdforworkYears);


                let eleTdsalary = document.createElement("td");
                let txtTdsalary = document.createTextNode(`${emp.employees[i].salary}`);
                eleTdsalary.appendChild(txtTdsalary);
                eleTr.appendChild(eleTdsalary);
               
                docFrag.appendChild(eleTr);

                //console.log("表格內容");
            }
            tbody.appendChild(docFrag);
        }
        </script>
}
